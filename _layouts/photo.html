---
layout: default
---

<div class="photo-album">
  <div class="album-header">
    <h1 class="album-title">{{ page.title }}</h1>
    <div class="album-meta">
      <span class="album-date">{{ page.date | date_to_string }}</span>
      {% if page.location %}
      <span class="album-location">{{ page.location }}</span>
      {% endif %}
    </div>
  </div>

  <div class="photo-grid" id="photo-grid">
    {{ content }}
  </div>
</div>

<!-- Lightbox overlay -->
<div class="lightbox" id="lightbox">
  <button class="lightbox-close" id="lightbox-close">&times;</button>
  <button class="lightbox-nav lightbox-prev" id="lightbox-prev">&larr;</button>
  <div class="lightbox-content">
    <img id="lightbox-img" src="" alt="">
    <p id="lightbox-caption" class="lightbox-caption"></p>
  </div>
  <button class="lightbox-nav lightbox-next" id="lightbox-next">&rarr;</button>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const grid = document.getElementById('photo-grid');
  const items = grid.querySelectorAll('.grid-item');
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightbox-img');
  const lightboxCaption = document.getElementById('lightbox-caption');
  const closeBtn = document.getElementById('lightbox-close');
  const prevBtn = document.getElementById('lightbox-prev');
  const nextBtn = document.getElementById('lightbox-next');

  let currentIndex = 0;
  const photos = [];

  items.forEach(function(item, index) {
    const img = item.querySelector('img');
    const caption = item.getAttribute('data-caption') || '';
    photos.push({
      src: img.getAttribute('src'),
      alt: img.getAttribute('alt') || '',
      caption: caption
    });

    item.addEventListener('click', function() {
      openLightbox(index);
    });
  });

  function openLightbox(index) {
    currentIndex = index;
    updateLightbox();
    lightbox.classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  function closeLightbox() {
    lightbox.classList.remove('active');
    document.body.style.overflow = '';
  }

  function updateLightbox() {
    const photo = photos[currentIndex];
    lightboxImg.src = photo.src;
    lightboxImg.alt = photo.alt;
    lightboxCaption.textContent = photo.caption;
  }

  function nextImage() {
    currentIndex = (currentIndex + 1) % photos.length;
    updateLightbox();
  }

  function prevImage() {
    currentIndex = (currentIndex - 1 + photos.length) % photos.length;
    updateLightbox();
  }

  closeBtn.addEventListener('click', closeLightbox);
  nextBtn.addEventListener('click', nextImage);
  prevBtn.addEventListener('click', prevImage);

  lightbox.addEventListener('click', function(e) {
    if (e.target === lightbox) {
      closeLightbox();
    }
  });

  document.addEventListener('keydown', function(e) {
    if (!lightbox.classList.contains('active')) return;

    if (e.key === 'Escape') {
      closeLightbox();
    } else if (e.key === 'ArrowRight') {
      nextImage();
    } else if (e.key === 'ArrowLeft') {
      prevImage();
    }
  });
});
</script>
